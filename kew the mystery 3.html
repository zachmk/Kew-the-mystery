<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="Kew: The Mystery - Unbox mystery boxes full of surprises. Shop now for Mini, Classic, and Ultimate Mystery Boxes!">
  <title>Kew: The Mystery</title>
  <link rel="icon" type="image/png" href="https://example.com/favicon.png"> <!-- Replace with your favicon URL -->
  <style>
    /* Reset & Basics */
    *, *::before, *::after { box-sizing: border-box; }
    body { margin: 0; font-family: 'Segoe UI', sans-serif; background-color: #0d0d0d; color: #f2f2f2; }
    a { color: inherit; text-decoration: none; }
    a:focus { outline: 2px solid #fff; }
    button { cursor: pointer; }

    /* Skip-to-content link */
    .skip-link {
      position: absolute;
      top: -40px;
      left: 0;
      background: #5c00cc;
      color: white;
      padding: 8px;
      z-index: 100;
    }
    .skip-link:focus { top: 0; }

    /* Header */
    header { background-color: #1a1a1a; padding: 20px; text-align: center; border-bottom: 2px solid #444; }
    header h1 { margin: 0; font-size: 2.5em; }
    header p { font-size: 1.2em; color: #ccc; }

    /* Hero Section */
    .hero { text-align: center; padding: 50px 20px; background: url('https://images.unsplash.com/photo-1603052875505-2b76a0b3fd97?ixlib=rb-4.0.3&auto=format&fit=crop&w=1350&q=80') no-repeat center/cover; color: #fff; }
    .hero h2 { font-size: 2em; margin-bottom: 10px; background-color: rgba(0,0,0,0.6); display: inline-block; padding: 10px 20px; border-radius: 5px; }

    /* Shop Section */
    main { padding: 40px 20px; }
    .boxes { display: flex; flex-wrap: wrap; justify-content: center; gap: 20px; }
    .box { background-color: #222; border: 1px solid #333; width: 280px; padding: 20px; border-radius: 10px; transition: transform 0.2s; }
    .box:hover { transform: scale(1.02); }
    .box h3 { margin-top: 0; }
    .box button { background-color: #5c00cc; color: white; border: none; padding: 10px 20px; border-radius: 5px; font-size: 1em; margin-top: 10px; }
    .box button:focus { outline: 2px solid #fff; background-color: #7a00e6; }

    footer { text-align: center; padding: 20px; background-color: #111; color: #777; }

    /* Modal */
    .modal { display: none; position: fixed; z-index: 1000; left: 0; top: 0; width: 100%; height: 100%; overflow: auto; background-color: rgba(0,0,0,0.7); opacity: 0; transition: opacity 0.3s ease; }
    .modal.show { display: block; opacity: 1; }
    .modal-content { background-color: #1a1a1a; margin: 10% auto; padding: 30px; border: 1px solid #444; width: 90%; max-width: 400px; text-align: center; color: #fff; border-radius: 10px; transform: translateY(-50px); transition: transform 0.3s ease; }
    .modal.show .modal-content { transform: translateY(0); }
    .close { color: #aaa; float: right; font-size: 24px; font-weight: bold; cursor: pointer; }
    .close:hover { color: #fff; }

    /* Mobile */
    @media (max-width: 768px) { .boxes { flex-direction: column; align-items: center; } }
  </style>
</head>
<body>

  <a href="#main-content" class="skip-link">Skip to content</a>

  <header>
    <h1>Kew: The Mystery</h1>
    <p>Unbox the unknown. Are you ready?</p>
  </header>

  <section class="hero" role="banner">
    <h2>Every box hides a secret.</h2>
    <p>From the curious to the creepy – open if you dare.</p>
  </section>

  <main id="main-content">
    <h2>Shop Mystery Boxes</h2>
    <div class="boxes">
      <div class="box" role="region" aria-label="Mini Mystery Box">
        <h3>Mini Mystery Box</h3>
        <p>Small but packed with surprises. Great for first-timers!</p>
        <p><strong>£9.99</strong></p>
        <button aria-label="Buy Mini Mystery Box" onclick="openModal('Mini Mystery Box')">Buy Now</button>
      </div>

      <div class="box" role="region" aria-label="Classic Mystery Box">
        <h3>Classic Mystery Box</h3>
        <p>A full-sized mystery box with a mix of cool and creepy items.</p>
        <p><strong>£19.99</strong></p>
        <button aria-label="Buy Classic Mystery Box" onclick="openModal('Classic Mystery Box')">Buy Now</button>
      </div>

      <div class="box" role="region" aria-label="Ultimate Mystery Crate">
        <h3>Ultimate Mystery Crate</h3>
        <p>For the bold. Rare items, themes, and wild surprises.</p>
        <p><strong>£39.99</strong></p>
        <button aria-label="Buy Ultimate Mystery Crate" onclick="openModal('Ultimate Mystery Crate')">Buy Now</button>
      </div>
    </div>
  </main>

  <footer>
    &copy; 2025 Kew: The Mystery. All rights reserved.
  </footer>

  <!-- Modal -->
  <div id="purchaseModal" class="modal" role="dialog" aria-modal="true" aria-labelledby="modalTitle">
    <div class="modal-content">
      <span class="close" aria-label="Close modal" onclick="closeModal()">&times;</span>
      <h2 id="modalTitle">Almost there!</h2>
      <p id="modalText">You're about to purchase a mystery box.</p>
      <a id="checkoutLink" href="#" target="_blank">
        <button>Continue to Checkout</button>
      </a>
      <button onclick="closeModal()">Close</button>
    </div>
  </div>

  <script>
    const modal = document.getElementById('purchaseModal');
    const focusableElements = 'button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])';
    let firstFocusable, lastFocusable;

    function openModal(boxName) {
      const checkoutLinks = {
        "Mini Mystery Box": "https://buy.stripe.com/test_4gM7sK5WP43Dg4x2PMdnW00",
        "Classic Mystery Box": "https://buy.stripe.com/test_6oU7sK70TdEd6tX2PMdnW01",
        "Ultimate Mystery Crate": "https://buy.stripe.com/test_14AeVc2KDcA9dWpcqmdnW02"
      };

      document.getElementById('modalText').innerText = `You're about to purchase the "${boxName}".`;
      document.getElementById('checkoutLink').href = checkoutLinks[boxName];

      modal.classList.add('show');

      const focusableContent = modal.querySelectorAll(focusableElements);
      firstFocusable = focusableContent[0];
      lastFocusable = focusableContent[focusableContent.length - 1];
      firstFocusable.focus();

      document.addEventListener('keydown', trapFocus);
    }

    function closeModal() {
      modal.classList.remove('show');
      document.removeEventListener('keydown', trapFocus);
    }

    function trapFocus(e) {
      if (e.key === 'Escape') closeModal();

      if (e.key === 'Tab') {
        const isShift = e.shiftKey;
        if (isShift) {
          if (document.activeElement === firstFocusable) {
            e.preventDefault();
            lastFocusable.focus();
          }
        } else {
          if (document.activeElement === lastFocusable) {
            e.preventDefault();
            firstFocusable.focus();
          }
        }
      }
    }

    window.onclick = function(event) {
      if (event.target === modal) closeModal();
    }
  </script>

</body>
</html>
